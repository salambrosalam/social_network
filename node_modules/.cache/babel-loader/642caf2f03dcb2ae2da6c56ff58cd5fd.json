{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\react_projects\\\\it-kamasutra\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\react_projects\\\\it-kamasutra\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"E:\\\\react_projects\\\\it-kamasutra\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"E:\\\\react_projects\\\\it-kamasutra\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{usersAPI}from\"../api/api\";export var ADD_POST=\"ADD_POST\";export var SET_USER_PROFILE=\"SET_USER_PROFILE\";export var SET_STATUS=\"SET_STATUS\";export var UPDATE_STATUS=\"UPDATE_STATUS\";export var DELETE_POST=\"DELETE_POST\";export var SET_PHOTO=\"SET_PHOTO\";var initialState={posts:[{id:1,message:\"Hi,from Java man\",likesCount:25},{id:1,message:\"Python the best_ ho-ho-ho\",likesCount:55}],profile:null,status:\"\"};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:{var newPost={id:5,message:action.newPostBody,likesCount:100};return _objectSpread(_objectSpread({},state),{},{posts:[].concat(_toConsumableArray(state.posts),[newPost])});}case DELETE_POST:return _objectSpread(_objectSpread({},state),{},{posts:state.posts.filter(function(post){return post.id!==action.postId;})});case SET_USER_PROFILE:{return _objectSpread(_objectSpread({},state),{},{profile:action.profile});}case SET_STATUS:{return _objectSpread(_objectSpread({},state),{},{status:action.status});}case SET_PHOTO:{return _objectSpread(_objectSpread({},state),{},{profile:_objectSpread(_objectSpread({},state.profile),{},{photos:action.payload})});}default:return state;}};export var addPostActionCreator=function addPostActionCreator(newPostBody){return{type:ADD_POST,newPostBody:newPostBody};};export var deletePostActionCreator=function deletePostActionCreator(postId){return{type:DELETE_POST,postId:postId};};export var setUserProfileActionCreator=function setUserProfileActionCreator(profile){return{type:SET_USER_PROFILE,profile:profile};};export var setStatusActionCreator=function setStatusActionCreator(status){return{type:SET_STATUS,status:status};};export var setPhotoActionCreator=function setPhotoActionCreator(photo){return{type:SET_PHOTO,payload:photo};};export var getStatusThunkCreator=function getStatusThunkCreator(userId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return usersAPI.getStatus(userId);case 2:response=_context.sent;dispatch(setStatusActionCreator(response.data));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var updateStatusThunkCreator=function updateStatusThunkCreator(status){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return usersAPI.updateStatus(status);case 2:response=_context2.sent;if(response.data.resultCode===0){dispatch(setStatusActionCreator(status));}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var setUsersProfileThunkCreator=function setUsersProfileThunkCreator(userId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return usersAPI.getProfile(userId);case 2:response=_context3.sent;dispatch(setUserProfileActionCreator(response.data));case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var savePhotoThunkCreator=function savePhotoThunkCreator(file){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return usersAPI.savePhoto(file);case 2:response=_context4.sent;if(response.data.resultCode===0){dispatch(setPhotoActionCreator(response.data.data.photos));}case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export default profileReducer;","map":{"version":3,"sources":["E:/react_projects/it-kamasutra/src/redux/profileReducer.js"],"names":["usersAPI","ADD_POST","SET_USER_PROFILE","SET_STATUS","UPDATE_STATUS","DELETE_POST","SET_PHOTO","initialState","posts","id","message","likesCount","profile","status","profileReducer","state","action","type","newPost","newPostBody","filter","post","postId","photos","payload","addPostActionCreator","deletePostActionCreator","setUserProfileActionCreator","setStatusActionCreator","setPhotoActionCreator","photo","getStatusThunkCreator","userId","dispatch","getStatus","response","data","updateStatusThunkCreator","updateStatus","resultCode","setUsersProfileThunkCreator","getProfile","savePhotoThunkCreator","file","savePhoto"],"mappings":"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","sourcesContent":["import {usersAPI} from \"../api/api\";\r\n\r\nexport const ADD_POST = \"ADD_POST\";\r\nexport const SET_USER_PROFILE = \"SET_USER_PROFILE\";\r\nexport const SET_STATUS = \"SET_STATUS\";\r\nexport const UPDATE_STATUS = \"UPDATE_STATUS\";\r\nexport const DELETE_POST = \"DELETE_POST\";\r\nexport const SET_PHOTO = \"SET_PHOTO\";\r\n\r\nlet initialState = {\r\n    posts: [\r\n        {id: 1, message: \"Hi,from Java man\", likesCount: 25},\r\n        {id: 1, message: \"Python the best_ ho-ho-ho\", likesCount: 55}\r\n    ],\r\n    profile: null,\r\n    status: \"\"\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n    switch(action.type){\r\n        case ADD_POST: {\r\n            let newPost = {\r\n                id: 5,\r\n                message: action.newPostBody,\r\n                likesCount: 100\r\n            };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n            };\r\n        }\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                posts: state.posts.filter(post => post.id !== action.postId )\r\n            }\r\n        case SET_USER_PROFILE: {\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n        case SET_STATUS: {\r\n            return{\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case SET_PHOTO: {\r\n            return{\r\n                ...state,\r\n                profile: {...state.profile, photos: action.payload}\r\n            }\r\n        }\r\n        default: return state;\r\n    }\r\n}\r\n\r\n\r\nexport let addPostActionCreator = (newPostBody) => {\r\n    return {\r\n        type: ADD_POST,\r\n        newPostBody\r\n    }\r\n}\r\n\r\nexport let deletePostActionCreator = (postId) => {\r\n    return {\r\n        type: DELETE_POST,\r\n        postId\r\n    }\r\n}\r\n\r\nexport let setUserProfileActionCreator = (profile) => {\r\n    return {\r\n        type: SET_USER_PROFILE,\r\n        profile: profile\r\n    }\r\n}\r\n\r\nexport let setStatusActionCreator = (status) => {\r\n    return {\r\n        type: SET_STATUS,\r\n        status: status\r\n    }\r\n}\r\n\r\nexport let setPhotoActionCreator = (photo) => {\r\n    return {\r\n        type: SET_PHOTO,\r\n        payload: photo\r\n    }\r\n}\r\n\r\nexport let getStatusThunkCreator = (userId) => {\r\n    return async (dispatch) => {\r\n        let response = await usersAPI.getStatus(userId)\r\n            dispatch(setStatusActionCreator(response.data))\r\n        }\r\n}\r\n\r\nexport let updateStatusThunkCreator = (status) => {\r\n    return async (dispatch) => {\r\n        let response = await usersAPI.updateStatus(status)\r\n            if (response.data.resultCode === 0){\r\n                dispatch(setStatusActionCreator(status))\r\n            }\r\n        }\r\n}\r\n\r\nexport const setUsersProfileThunkCreator = (userId) => {\r\n    return async (dispatch) => {\r\n        let response = await usersAPI.getProfile(userId)\r\n            dispatch(setUserProfileActionCreator(response.data));\r\n    }\r\n}\r\n\r\nexport const savePhotoThunkCreator = (file) => async dispatch => {\r\n    let response = await usersAPI.savePhoto(file);\r\n    if (response.data.resultCode === 0){\r\n        dispatch(setPhotoActionCreator(response.data.data.photos))\r\n    }\r\n}\r\n\r\nexport default profileReducer;\r\n"]},"metadata":{},"sourceType":"module"}